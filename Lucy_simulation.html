<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<title>Lucy Robo-advisor Mock ‚Äî Risk Profiler (High-Tech)</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  /* === THEME === */
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    background: radial-gradient(circle at top, #0a0f1c, #020409 80%);
    color: #d1e7ff;
    margin: 0;
    padding: 40px 16px;
    max-width: 900px;
    margin: auto;
    overflow-x: hidden;
  }

  h1 {
    font-size: 1.8rem;
    color: #64f9ff;
    text-align: center;
    margin-bottom: 12px;
    text-shadow: 0 0 12px #00e1ff;
  }

  p.lead {
    text-align: center;
    color: #9ab3d0;
    margin-bottom: 30px;
  }

  /* === CARD === */
  .card {
    backdrop-filter: blur(14px) saturate(160%);
    -webkit-backdrop-filter: blur(14px) saturate(160%);
    background-color: rgba(14, 25, 46, 0.65);
    border: 1px solid rgba(60, 120, 180, 0.25);
    box-shadow: 0 0 24px rgba(0, 195, 255, 0.1);
    border-radius: 14px;
    padding: 20px;
    margin-bottom: 20px;
    transition: all 0.4s ease;
    animation: cardFadeIn 0.7s ease-out forwards;
    opacity: 0;
  }
  
  .card:nth-of-type(1) { animation-delay: 0.1s; }
  .card:nth-of-type(2) { animation-delay: 0.3s; }

  .card:hover {
    box-shadow: 0 0 35px rgba(0, 195, 255, 0.25);
    transform: translateY(-2px);
  }

  /* === FORM ELEMENTS === */
  label {
    display: block;
    font-weight: 600;
    color: #b4c9ff;
    margin-bottom: 6px;
  }

  select, input[type=number], textarea {
    width: 100%;
    padding: 10px;
    background: #0d1628;
    border: 1px solid rgba(120, 180, 255, 0.25);
    border-radius: 8px;
    color: #d1e7ff;
    transition: border-color 0.3s, box-shadow 0.3s;
    appearance: none;
    -webkit-appearance: none;
  }

  select:focus {
    border-color: #00e1ff;
    box-shadow: 0 0 8px rgba(0, 225, 255, 0.3);
    outline: none;
  }

  .form-error {
    border-color: #ff6a6a !important;
    box-shadow: 0 0 10px rgba(255, 80, 80, 0.5) !important;
  }

  button {
    background: linear-gradient(90deg, #00c6ff, #0072ff);
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 700;
    transition: 0.3s;
    box-shadow: 0 0 16px rgba(0, 150, 255, 0.2);
    font-size: 1rem; /* M·ªöI: Th√™m ƒë·ªÉ n√∫t to h∆°n */
  }

  button:hover {
    box-shadow: 0 0 25px rgba(0, 200, 255, 0.5);
    transform: scale(1.04);
  }

  button:disabled {
    background: #555;
    opacity: 0.7;
    cursor: wait;
    transform: scale(1);
    box-shadow: none;
  }

  .row { display: flex; flex-wrap: wrap; gap: 10px; }
  .col { flex: 1 1 220px; min-width: 220px; }

  /* === RESULT === */
  .result {
    margin-top: 20px;
    padding: 16px;
    border-radius: 10px;
    background: rgba(255,255,255,0.04);
    animation: fadeIn 0.6s ease-in-out;
  }

  .badge {
    background: linear-gradient(90deg,#00f2fe,#4facfe);
    color:#0a0f1c;
    padding: 5px 10px;
    border-radius: 999px;
    font-weight: 700;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    color: #b8cfff;
  }
  th, td {
    padding: 8px 10px;
    border: 1px solid rgba(255,255,255,0.1);
    text-align: center;
  }
  th {
    background: rgba(255,255,255,0.05);
  }

  .muted { color: #8ca1c1; font-size: 0.95rem; }

  footer {
    text-align: center;
    margin-top: 30px;
    color: #6f829d;
    font-size: 0.9rem;
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(10px);}
    to {opacity: 1; transform: translateY(0);}
  }

  @keyframes cardFadeIn {
    from {opacity: 0; transform: translateY(20px);}
    to {opacity: 1; transform: translateY(0);}
  }

  /* === LUCY AI ASSISTANT === */
  .lucy {
    position: fixed;
    bottom: 24px;
    right: 24px;
    background: linear-gradient(160deg, rgba(0,255,255,0.15), rgba(0,150,255,0.05));
    border: 1px solid rgba(0,200,255,0.3);
    border-radius: 14px;
    padding: 12px 16px;
    color: #d1e7ff;
    font-size: 0.95rem;
    box-shadow: 0 0 16px rgba(0,180,255,0.2);
    backdrop-filter: blur(10px);
    width: 230px;
    animation: fadeIn 1.2s ease;
    z-index: 100;
  }
  .lucy:before {
    content: "ü§ñ Lucy:";
    display: block;
    font-weight: 700;
    color: #64f9ff;
    margin-bottom: 6px;
    display: flex;
    align-items: center;
  }
  
  .lucy:before::after {
    content: '';
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: #00ffaa;
    margin-left: 8px;
    box-shadow: 0 0 6px #00ffaa;
    animation: pulse 1.5s infinite;
  }

  @keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.4; }
    100% { opacity: 1; }
  }

  /* === BI·ªÇU ƒê·ªí DANH M·ª§C === */
  .portfolio-bar-chart {
    margin-top: 16px;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }
  .bar-item {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .bar-label {
    flex-basis: 110px;
    flex-shrink: 0;
    font-size: 0.9rem;
  }
  .bar-label span {
    font-weight: 600;
    color: #e0f0ff;
  }
  .bar-label small {
    display: block;
    color: #8ca1c1;
    font-size: 0.8rem;
    white-space: nowrap;
  }
  .bar-track {
    flex-grow: 1;
    height: 10px;
    background-color: rgba(0, 0, 0, 0.25);
    border-radius: 5px;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,0.05);
  }
  .bar-fill {
    height: 100%;
    border-radius: 5px;
    transition: width 1s ease-out;
    animation: growBar 1s ease-out;
  }
  .bar-value {
    flex-basis: 40px;
    flex-shrink: 0;
    text-align: right;
    font-weight: 700;
    color: #e0f0ff;
  }
  .bar-r1 { background: #0088fe; }
  .bar-r2 { background: #00c0f9; }
  .bar-r3 { background: #00e0b8; }
  .bar-r4 { background: #a0ff64; }
  .bar-r5 { background: #f9d423; }

  @keyframes growBar {
    from { width: 0% !important; }
    to { /* width ƒë∆∞·ª£c set b·∫±ng inline style */ }
  }
  
  /* === M·ªöI: M√ÄN H√åNH CH√ÄO M·ª™NG === */
  .welcome-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* S·ª≠ d·ª•ng c√πng 1 n·ªÅn v·ªõi body */
    background: radial-gradient(circle at top, #0a0f1c, #020409 80%);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    transition: opacity 0.5s ease-out;
  }
  
  .welcome-box {
    /* Copy style t·ª´ .card */
    backdrop-filter: blur(14px) saturate(160%);
    -webkit-backdrop-filter: blur(14px) saturate(160%);
    background-color: rgba(14, 25, 46, 0.65);
    border: 1px solid rgba(60, 120, 180, 0.25);
    box-shadow: 0 0 24px rgba(0, 195, 255, 0.1);
    border-radius: 14px;
    padding: 30px 40px;
    
    text-align: center;
    max-width: 400px;
    animation: fadeIn 0.8s ease-out;
  }
  
  .welcome-box h2 {
    font-size: 1.6rem;
    color: #64f9ff;
    text-shadow: 0 0 12px #00e1ff;
    margin-top: 0;
  }
  
  .welcome-box p {
    color: #b4c9ff;
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 25px;
  }
  
  .welcome-box button {
    padding: 12px 25px; /* L√†m n√∫t to h∆°n */
  }
  
</style>
</head>
<body>

  <div class="welcome-overlay" id="welcomeOverlay">
    <div class="welcome-box">
      <h2>CH√ÄO M·ª™NG B·∫†N!</h2>
      <p>H√£y g·∫∑p g·ª° Lucy, tr·ª£ l√Ω t∆∞ v·∫•n ƒë·∫ßu t∆∞ AI c·ªßa b·∫°n.</p>
      <button type"button" onclick="startSurvey()">B·∫Øt ƒë·∫ßu</button>
    </div>
  </div>

  <div id="mainContent" style="display: none;">

    <h1>Lucy Robo-advisor (Nh√≥m 3)</h1>
    <p class="lead">ƒêi·ªÅn nhanh 6 c√¢u h·ªèi ƒë·ªÉ h·ªá th·ªëng ph√¢n lo·∫°i h·ªì s∆° C1‚ÄìC5 v√† g·ª£i √Ω danh m·ª•c R1‚ÄìR5.</p>

    <div class="card">
      <form id="profiler">
        <div class="row">
          <div class="col">
            <label for="age">1) Tu·ªïi c·ªßa b·∫°n</label>
            <select id="age">
              <option value="">Ch·ªçn...</option>
              <option value="0">D∆∞·ªõi 25</option>
              <option value="1">25‚Äì34</option>
              <option value="2">35‚Äì44</option>
              <option value="3">45‚Äì54</option>
              <option value="2">55+</option>
            </select>
          </div>
          <div class="col">
            <label for="income">2) Thu nh·∫≠p h√†ng nƒÉm (VNƒê)</label>
            <select id="income">
              <option value="">Ch·ªçn...</option>
              <option value="0">&lt; 100 tri·ªáu</option>
              <option value="1">100‚Äì300 tri·ªáu</option>
              <option value="2">300‚Äì800 tri·ªáu</option>
              <option value="3">&gt; 800 tri·ªáu</option>
            </select>
          </div>
        </div>

        <div class="row" style="margin-top:12px;">
          <div class="col">
            <label for="experience">3) Kinh nghi·ªám ƒë·∫ßu t∆∞</label>
            <select id="experience">
              <option value="">Ch·ªçn...</option>
              <option value="0">Ch∆∞a t·ª´ng ƒë·∫ßu t∆∞</option>
              <option value="1">&lt; 2 nƒÉm</option>
              <option value="2">2‚Äì5 nƒÉm</option>
              <option value="3">&gt; 5 nƒÉm</option>
            </select>
          </div>
          <div class="col">
            <label for="scenario">4) N·∫øu th·ªã tr∆∞·ªùng gi·∫£m 20%, b·∫°n s·∫Ω:</label>
            <select id="scenario">
              <option value="">Ch·ªçn...</option>
              <option value="0">B√°n to√†n b·ªô</option>
              <option value="1">B√°n m·ªôt ph·∫ßn</option>
              <option value="2">Gi·ªØ nguy√™n</option>
              <option value="3">Mua th√™m</option>
            </select>
          </div>
        </div>

        <div class="row" style="margin-top:12px;">
          <div class="col">
            <label for="goal">5) M·ª•c ti√™u ƒë·∫ßu t∆∞ ch√≠nh</label>
            <select id="goal">
              <option value="">Ch·ªçn...</option>
              <option value="0">B·∫£o to√†n v·ªën</option>
              <option value="1">Thu nh·∫≠p ·ªïn ƒë·ªãnh</option>
              <option value="2">TƒÉng tr∆∞·ªüng v·ª´a</option>
              <option value="3">TƒÉng tr∆∞·ªüng cao</option>
            </select>
          </div>
          <div class="col">
            <label for="horizon">6) Th·ªùi gian ƒë·∫ßu t∆∞ d·ª± ki·∫øn</label>
            <select id="horizon">
              <option value="">Ch·ªçn...</option>
              <option value="0">&lt; 1 nƒÉm</option>
              <option value="1">1‚Äì3 nƒÉm</option>
              <option value="2">3‚Äì5 nƒÉm</option>
              <option value="3">&gt; 5 nƒÉm</option>
            </select>
          </div>
        </div>

        <div style="margin-top:16px; text-align:center;">
          <button type="button" id="computeBtn" onclick="compute()">ƒê√°nh gi√° &amp; G·ª£i √Ω</button>
        </div>
      </form>

      <div id="out" class="result" style="display:none;"></div>
    </div>

    <div class="card">
      <h3>Matrix C (Kh√°ch h√†ng) ‚Üí R (S·∫£n ph·∫©m)</h3>
      <p class="muted">C1 ti·∫øp c·∫≠n R1‚ÄìR2, C5 c√≥ th·ªÉ ti·∫øp c·∫≠n R1‚ÄìR5.</p>
      <table>
        <thead><tr><th>C / R</th><th>R1</th><th>R2</th><th>R3</th><th>R4</th><th>R5</th></tr></thead>
        <tbody>
          <tr><th>C1</th><td>‚úì</td><td>‚úì</td><td>‚úï</td><td>‚úï</td><td>‚úï</td></tr>
          <tr><th>C2</th><td>‚úì</td><td>‚úì</td><td>‚úì</td><td>‚úï</td><td>‚úï</td></tr>
          <tr><th>C3</th><td>‚úì</td><td>‚úì</td><td>‚úì</td><td>‚úì</td><td>‚úï</td></tr>
          <tr><th>C4</th><td>‚úì</td><td>‚úì</td><td>‚úì</td><td>‚úì</td><td>‚úì (small)</td></tr>
          <tr><th>C5</th><td>‚úì</td><td>‚úì</td><td>‚úì</td><td>‚úì</td><td>‚úì</td></tr>
        </tbody>
      </table>
      <img src="https://i.postimg.cc/hjgmYPfp/Matrix.jpg" 
       alt="Matrix illustration"
       style="display:block;margin:20px auto;max-width:100%;border-radius:10px;">
    </div>

    <footer>Mock minh h·ªça robo-advisor (Lucy-style). Kh√¥ng ph·∫£i t∆∞ v·∫•n ƒë·∫ßu t∆∞ th·ª±c t·∫ø.</footer>

    <div class="lucy" id="lucyBox">Hello! I'm Lucy üëã</div>

  </div> <script>
    // Lucy speaking function (Gi·ªØ nguy√™n b·∫£n ƒë√£ s·ª≠a l·ªói)
    function speak(msg) {
      const lucy = document.getElementById("lucyBox");
      lucy.innerHTML = '';
      let i = 0;
      function typeWriter() {
        if (i < msg.length) {
          lucy.innerHTML += msg.charAt(i);
          i++;
          setTimeout(typeWriter, 25);
        }
      }
      typeWriter();

      speechSynthesis.cancel();
      const utterance = new SpeechSynthesisUtterance(msg);
      utterance.lang = 'en-US';
      utterance.pitch = 1.05;
      utterance.rate = 0.95;
      utterance.volume = 1;

      function setVoiceAndSpeak() {
        speechSynthesis.onvoiceschanged = null; // Ch·ªëng l·∫∑p
        
        const voices = speechSynthesis.getVoices();
        const lucyVoice =
          voices.find(v => v.name.toLowerCase().includes('lucy') && v.lang.includes('en')) ||
          voices.find(v => v.name.toLowerCase().includes('google') && v.lang.includes('en-US') && v.name.toLowerCase().includes('female')) ||
          voices.find(v => v.lang.startsWith('en') && v.name.toLowerCase().includes('female')) ||
          voices.find(v => v.lang.startsWith('en-US')) ||
          voices[0];
        if (lucyVoice) utterance.voice = lucyVoice;
        speechSynthesis.speak(utterance);
      }

      if (speechSynthesis.getVoices().length === 0) {
        speechSynthesis.onvoiceschanged = setVoiceAndSpeak;
      } else {
        setVoiceAndSpeak();
      }
    }

    // === PH·∫¶N JS N√ÇNG C·∫§P ===

    // M·ªöI: H√†m k√≠ch ho·∫°t khi nh·∫•n n√∫t "B·∫Øt ƒë·∫ßu kh·∫£o s√°t"
    function startSurvey() {
      const overlay = document.getElementById('welcomeOverlay');
      const main = document.getElementById('mainContent');

      // 1. K√≠ch ho·∫°t l·ªùi ch√†o (ƒë√¢y l√† t∆∞∆°ng t√°c ƒë·∫ßu ti√™n)
      // Tr√¨nh duy·ªát s·∫Ω cho ph√©p √¢m thanh v√¨ n√≥ ƒë∆∞·ª£c g·ªçi t·ª´ 1 c√∫ click
      speak("Hi there! I'm Lucy, your investment assistant. Let's explore your investor profile together!");
      
      // 2. ·∫®n m√†n h√¨nh ch√†o m·ª´ng (v·ªõi hi·ªáu ·ª©ng m·ªù)
      overlay.style.opacity = '0';
      setTimeout(() => {
        overlay.style.display = 'none';
      }, 500); // 0.5 gi√¢y (kh·ªõp v·ªõi transition trong CSS)
      
      // 3. Hi·ªÉn th·ªã n·ªôi dung ch√≠nh
      main.style.display = 'block';
    }


    // Data (Gi·ªØ nguy√™n)
    const mapping = {
      'C1 (Conservative)': { allowed: ['R1','R2'], portfolio: {'R1':60,'R2':30,'R3':10} },
      'C2 (Steady)': { allowed: ['R1','R2','R3'], portfolio: {'R1':40,'R2':35,'R3':25} },
      'C3 (Balanced)': { allowed: ['R1','R2','R3','R4'], portfolio: {'R1':20,'R2':30,'R3':35,'R4':15} },
      'C4 (Growth)': { allowed: ['R1','R2','R3','R4','(small)R5'], portfolio: {'R1':10,'R2':20,'R3':40,'R4':20,'R5':10} },
      'C5 (Aggressive)': { allowed: ['R1','R2','R3','R4','R5'], portfolio: {'R1':5,'R2':10,'R3':35,'R4':30,'R5':20} }
    };
    const desc = {
      R1:"Ti·ªÅn g·ª≠i / G·ªëc b·∫£o to√†n",
      R2:"Tr√°i phi·∫øu / Thu nh·∫≠p ·ªïn ƒë·ªãnh",
      R3:"C·ªï phi·∫øu blue-chip",
      R4:"C·ªï phi·∫øu tƒÉng tr∆∞·ªüng / ETF ng√†nh",
      R5:"S·∫£n ph·∫©m r·ªßi ro cao"
    };

    // Compute function (Gi·ªØ nguy√™n)
    function compute(){
      const ids = ["age","income","experience","scenario","goal","horizon"];
      const btn = document.getElementById('computeBtn');
      const out = document.getElementById('out');
      out.style.display = 'none';
      
      document.querySelectorAll('.form-error').forEach(el => el.classList.remove('form-error'));
      
      let vals = [];
      let hasError = false;
      for (const id of ids) {
        const el = document.getElementById(id);
        const val = el.value;
        if(val === "") {
          el.classList.add('form-error');
          hasError = true;
        }
        vals.push(parseInt(val) || 0);
      }

      if (hasError) {
        speak("Oops! Please complete all the questions first.");
        return;
      }

      btn.disabled = true;
      btn.innerText = 'ƒêang ph√¢n t√≠ch...';
      speak("Analyzing your profile. One moment...");

      // D√πng setTimeout ƒë·ªÉ m√¥ ph·ªèng ƒë·ªô tr·ªÖ (4 gi√¢y)
      setTimeout(() => {
        const score = vals.reduce((a,b)=>a+b,0);
        let cClass = '';
        if(score <= 4) cClass = 'C1 (Conservative)';
        else if(score <= 7) cClass = 'C2 (Steady)';
        else if(score <= 10) cClass = 'C3 (Balanced)';
        else if(score <= 14) cClass = 'C4 (Growth)';
        else cClass = 'C5 (Aggressive)';

        const result = mapping[cClass];

        const chartHtml = Object.entries(result.portfolio)
          .map(([k,v]) => `
            <div class="bar-item">
              <div class="bar-label">
                <span>${k}</span>
                <small>${desc[k] || ''}</small>
              </div>
              <div class="bar-track">
                <div class="bar-fill bar-${k.toLowerCase()}" style="width: ${v}%;" title="${v}%"></div>
              </div>
              <div class="bar-value">${v}%</div>
            </div>
          `).join('');

        out.style.display = 'block';
        out.innerHTML = `
          <h3>K·∫øt qu·∫£: <span class="badge">${cClass}</span></h3>
          <p class="muted">ƒêi·ªÉm t·ªïng: <strong>${score}</strong> / 18</p>
          <p><strong>M·ª©c s·∫£n ph·∫©m ƒë∆∞·ª£c ph√©p:</strong> ${result.allowed.join(', ')}</p>
          <h4>Danh m·ª•c tham kh·∫£o:</h4>
          <div class="portfolio-bar-chart">
            ${chartHtml}
          </div>
        `;

        speak(`Your profile is ${cClass}. I suggest you focus on products like ${result.allowed.join(', ')}!`);
        btn.disabled = false;
        btn.innerText = 'ƒê√°nh gi√° & G·ª£i √Ω';

        out.scrollIntoView({ behavior: 'smooth', block: 'center' });

      }, 4000); // <-- Th·ªùi gian 4 gi√¢y
    }

    // KH√îNG C·∫¶N listener 'click' c≈© n·ªØa, v√¨ startSurvey() ƒë√£ thay th·∫ø
    // document.addEventListener('click', function greetOnce() { ... });

  </script>
</body>
</html>

